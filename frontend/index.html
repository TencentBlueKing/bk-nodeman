<!DOCTYPE html>
<html>
    <head>
        <link rel="icon" href="{{ STATIC_URL }}nodeman/images/favicon.png" type="image/x-icon" />
        <link rel="shortcut icon" href="{{ STATIC_URL }}nodeman/images/favicon.png" type="image/x-icon" />
        <meta charset="utf-8">
        <meta http-equiv="Expires" content="0">
        <meta http-equiv="Pragma" content="no-cache">
        <meta http-equiv="Cache-control" content="no-cache">
        <meta http-equiv="Cache" content="no-cache">
        <title> {{ WEB_TITLE }} </title>
        <script>
          window.PROJECT_CONFIG = (function () {
              const SITE_URL = '{{ SITE_URL }}'
              const STATIC_URL = '{{ STATIC_URL }}'
              const REMOTE_STATIC_URL = '{{ REMOTE_STATIC_URL }}'
              const RUN_VER = '{{ RUN_VER }}'
              const DEFAULT_CLOUD = '{{ DEFAULT_CLOUD }}'
              const NGINX_IP = '{{ NGINX_IP }}'
              const NGINX_PORT = '{{ NGINX_PORT }}'
              const APPO_IP = '{{ APPO_IP }}'
              const GSE_LISTEN_PORT = '{{ GSE_LISTEN_PORT }}'
              const PROXY_LISTEN_PORT = '{{ PROXY_LISTEN_PORT }}'
              const WEB_TITLE = '{{ WEB_TITLE }}'
              const USERNAME = '{{ USERNAME }}'
              const GLOBAL_TASK_CONFIG_PERMISSION = '{{ GLOBAL_TASK_CONFIG_PERMISSION }}'
              const GLOBAL_SETTING_PERMISSION = '{{ GLOBAL_SETTING_PERMISSION }}'
              const USE_IAM = '{{ USE_IAM }}'
              const APP_CODE = '{{ APP_CODE }}'
              const WXWORK_UIN = '{{ WXWORK_UIN }}'
              const DESTOP_URL = '{{ DESTOP_URL }}'
              const BKAPP_NODEMAN_CALLBACK_URL = '{{ BKAPP_NODEMAN_CALLBACK_URL }}'
              const BK_PAAS_HOST = '{{ BK_PAAS_HOST }}'
              const DEFAULT_SSH_PORT = '{{ DEFAULT_SSH_PORT }}'
              const USE_TJJ = '{{ USE_TJJ }}'
              const BK_DOCS_CENTER_URL = '{{ BK_DOCS_CENTER_URL }}'
              const BKAPP_RUN_ENV = '{{ BKAPP_RUN_ENV }}'
              const TAM_ID = '{{ TAM_ID }}'
              const LOGIN_URL = '{{ LOGIN_URL }}'

              return {
                  SITE_URL: SITE_URL,
                  STATIC_URL: STATIC_URL,
                  REMOTE_STATIC_URL: REMOTE_STATIC_URL,
                  RUN_VER: RUN_VER,
                  DEFAULT_CLOUD: parseInt(DEFAULT_CLOUD),
                  NGINX_IP,
                  NGINX_PORT,
                  APPO_IP,
                  GSE_LISTEN_PORT,
                  PROXY_LISTEN_PORT,
                  WEB_TITLE,
                  USERNAME,
                  GLOBAL_TASK_CONFIG_PERMISSION,
                  GLOBAL_SETTING_PERMISSION,
                  USE_IAM,
                  APP_CODE,
                  WXWORK_UIN,
                  DESTOP_URL,
                  BKAPP_NODEMAN_CALLBACK_URL,
                  BK_PAAS_HOST,
                  DEFAULT_SSH_PORT,
                  USE_TJJ,
                  BK_DOCS_CENTER_URL,
                  BKAPP_RUN_ENV,
                  TAM_ID,
                  LOGIN_URL,
              }
          })()
        </script>
        <script src="{{ TAM_URL }}"></script>
        <script>
          if(window.PROJECT_CONFIG.TAM_ID !== 'None') {
            const aegis = new Aegis({
              id: window.PROJECT_CONFIG.TAM_ID, // 项目ID
              uin: window.PROJECT_CONFIG.USERNAME ? window.PROJECT_CONFIG.USERNAME : 'dev_test', // 用户唯一 ID（可选）
              reportApiSpeed: true, // 接口测速
              reportAssetSpeed: true, // 静态资源测速
              pagePerformance: true, // 页面测速
              onError: true, // 当前实例是否需要进行错误监听，获取错误日志
              delay: 1000, // 上报节流时间，在该时间段内的上报将会合并到一个上报请求中
              repeat: 5, // 重复上报次数，对于同一个错误超过多少次不上报
              offlineLog: false, // 是否使用离线日志
              restfulApiList: [], // 当开启了接口测速，且项目中有些接口采用了 restful 规范，需要在该配置中列出，帮助 Aegis 识别哪些接口是同一条接
              spa: true
            })
          }
        </script>
    </head>
    <body>
        <div id="app"></div>
        <script src="{{ STATIC_URL }}nodeman/lib.bundle.js?t=<%= htmlWebpackPlugin.options.bundlehash %>"></script>
    </body>
</html>
